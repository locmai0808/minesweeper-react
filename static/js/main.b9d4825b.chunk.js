(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),o=a.n(l),c=(a(67),a(8)),i=a(9),s=a(11),u=a(10),d=a(12),m=a(13),h=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getValue",value:function(){var e=this.props.cell,t=e.revealed,a=e.flagged,n=e.mine,r=e.val;return t?n?"\ud83d\udca3":r||null:a?"\ud83d\udea9":null}},{key:"render",value:function(){var e=this.props,t=e.cell,a=e.onClick,n=e.onContextMenu,l="cell"+(t.revealed?" revealed":"")+(t.revealed&&t.val?[" one"," two"," three"," four"," five"," six"," seven"," eight"][t.val-1]:"")+(t.flagged?" flagged":"")+(t.boom?" boom":"");return r.a.createElement("div",{onClick:a,className:l,onContextMenu:n},this.getValue())}}]),t}(n.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){e.props.started&&e.props.clockIn()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return r.a.createElement("div",{className:"clock"},this.props.time)}}]),t}(n.Component),v=a(106),g=a(107),b=a(108),p=a(30),E=(a(80),[{level:"Easy",height:8,width:8,mines:10},{level:"Hard",height:10,width:10,mines:25},{level:"Expert",height:12,width:12,mines:40}]),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).newGame=function(){a.progress=0,a.flags=0,a.setState({board:a.initBoard(),status:"Good luck!",started:0,godMode:0,time:"00:00"})},a.initBoard=function(){for(var e=[],t=0;t<a.size;t++)e=[].concat(Object(m.a)(e),[{mine:0,revealed:0,flagged:0,val:0,boom:0}]);return e},a.addMines=function(e,t){for(var n=0,r=[],l=a.mines,o=a.width,c=function(){var l=a.randomNumber(),c=[-(o+1),-o,-(o-1),-1,0,1,o-1,o,o+1].map(function(e){return l+e});e[l].mine||c.includes(t)||(e[l].mine=1,r=[].concat(Object(m.a)(r),[l]),n++)};n<l;)c();return a.setState({minesLoc:r}),[e,r]},a.addNeighbor=function(e,t){var n=a.size,r=a.width;return t.forEach(function(t){t>=r&&(t-r-1>=0&&(t-r-1)%r!==r-1&&!e[t-r-1].mine&&e[t-r-1].val++,e[t-r].mine||e[t-r].val++,(t-r+1)%r===0||e[t-r+1].mine||e[t-r+1].val++),t<n-r&&((t+r-1)%r===r-1||e[t+r-1].mine||e[t+r-1].val++,e[t+r].mine||e[t+r].val++,(t+r+1)%r===0||e[t+r+1].mine||e[t+r+1].val++),t-1>=0&&(t-1)%r!==r-1&&!e[t-1].mine&&e[t-1].val++,t+1<n&&(t+1)%r!==0&&!e[t+1].mine&&e[t+1].val++}),e},a.randomNumber=function(){return Math.floor(Math.random()*a.size)},a.boom=function(e){var t=Object(m.a)(a.state.board);t[e].boom=1,t.forEach(function(e){e.revealed=1}),a.setState({board:t,status:"\ud83d\ude22 You lost \ud83d\ude22",started:0})},a.handleClick=function(e,t){a.state.started||t.revealed?a.reveal(e,t):a.setState({started:1,board:a.fillBoard(e)},function(){a.reveal(e,t)})},a.reveal=function(e,t,n){var r=t.mine,l=t.revealed,o=t.flagged,c=t.val;if(!(l||o&&!n)){if(r)return a.boom(e);if(0===c)o&&a.flags--,a.floodFill(e);else{var i=Object(m.a)(a.state.board);if(i[e].revealed=1,o&&(a.flags--,i[e].flagged=0),++a.progress===a.size-a.mines)return i.forEach(function(e){e.revealed=1}),a.setState({board:i,status:"\ud83c\udf89 YOU WON \ud83c\udf89",started:0},function(){return a.sendData()});a.setState({board:i})}}},a.sendData=function(){a.state.logged&&!a.state.godMode&&fetch("https://cryptic-harbor-11039.herokuapp.com/score?id=".concat(localStorage.id,"&name=").concat(localStorage.name,"&score=").concat(a.state.time,"&time=").concat(1*new Date,"&level=").concat(a.state.level,"&access_token=").concat(localStorage.accessToken))},a.floodFill=function(e){var t=Object(m.a)(a.state.board);if(!t[e].mine&&!t[e].revealed){t[e].revealed=1,a.progress++,a.setState({board:t});var n=a.width,r=a.size;e>=n&&(e-n-1>=0&&(e-n-1)%n!==n-1&&a.reveal(e-n-1,t[e-n-1],!0),a.reveal(e-n,t[e-n],!0),(e-n+1)%n!==0&&a.reveal(e-n+1,t[e-n+1],!0)),e<r-n&&((e+n-1)%n!==n-1&&a.reveal(e+n-1,t[e+n-1],!0),a.reveal(e+n,t[e+n],!0),(e+n+1)%n!==0&&a.reveal(e+n+1,t[e+n+1],!0)),e-1>=0&&(e-1)%n!==n-1&&a.reveal(e-1,t[e-1],!0),e+1<r&&(e+1)%n!==0&&a.reveal(e+1,t[e+1],!0)}},a.rightClick=function(e,t,n){if(n.preventDefault(),!a.state.started)return a.handleClick(e,t,n);if(!t.revealed){if(!t.flagged&&a.flags===a.mines)return p.NotificationManager.info("You only had ".concat(a.mines," flags"),"Uh oh!",3e3);var r=Object(m.a)(a.state.board);r[e].flagged=!r[e].flagged,a.flags+=r[e].flagged?1:-1,a.setState({board:r})}},a.clockIn=function(){var e=a.state.time.split(":"),t=Number(e[0]),n=Number(e[1])+1;t+=0===(n%=60)?1:0,n=n<10?"0"+n:n,t=t<10?"0"+t:t,a.setState({time:t+":"+n})},a.cheat=function(){if(!a.state.started)return p.NotificationManager.info("Start the game first!","Uh oh!",3e3);var e=Object(m.a)(a.state.board);a.state.minesLoc.forEach(function(t){e[t].revealed=1,e[t].flagged&&(e[t].flagged=0,a.flags--)}),a.setState({board:e,godMode:1})},a.changeLevel=function(){a.level=++a.level%3,a.height=E[a.level].height,a.width=E[a.level].width,a.mines=E[a.level].mines,a.size=a.height*a.width,a.progress=0,a.flags=0,a.setState({board:a.initBoard(),status:"Good luck!",started:0,time:"00:00",minesLoc:[],godMode:0,level:E[a.level].level})},a.renderBoard=function(){return a.state.board.map(function(e,t){return r.a.createElement(h,{key:t,onClick:function(){return a.handleClick(t,e)},onContextMenu:function(n){return a.rightClick(t,e,n)},cell:e})})},a.progress=0,a.flags=0,a.level=0,a.height=e.height,a.width=e.width,a.mines=e.mines,a.size=e.height*e.width,a.state={board:a.initBoard(),status:"Good luck!",started:0,time:"00:00",minesLoc:[],godMode:0,logged:localStorage.logged,level:e.level},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"fillBoard",value:function(e){var t=this.initBoard();return t=this.addNeighbor.apply(this,Object(m.a)(this.addMines(t,e)))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.NotificationContainer,null),r.a.createElement(v.a,null,r.a.createElement(g.a,{md:12},r.a.createElement("h1",{style:{color:"#febd16"}},this.state.status)),r.a.createElement(g.a,{md:12},r.a.createElement(b.a,{variant:"primary",onClick:this.newGame},"New Game")," ",r.a.createElement(b.a,{variant:"info",onClick:this.cheat,disabled:this.state.godMode},"Defuse Mines \ud83d\udc40")," ",r.a.createElement(b.a,{variant:"danger",onClick:this.changeLevel},this.state.level)),r.a.createElement(g.a,{md:12},r.a.createElement(f,{started:this.state.started,time:this.state.time,clockIn:this.clockIn})),r.a.createElement(g.a,{md:12,className:"game "+this.state.level},this.renderBoard())))}}]),t}(n.Component),j=a(113),O=a(112),w=a(55),y=a(54),S=a.n(y),C=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).facebookResponse=function(t){t&&t.name&&t.accessToken&&(localStorage.name=t.name,localStorage.expired=1*new Date+1e3*t.expiresIn,localStorage.id=t.id,localStorage.accessToken=t.accessToken,localStorage.logged=1,e.setState({logged:1}))},e.state={logged:0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.expired&&(1*new Date<parseInt(localStorage.expired)?this.setState({logged:1}):localStorage.clear())}},{key:"render",value:function(){return this.state.logged?r.a.createElement(w.a,null,localStorage.name):r.a.createElement(O.a,null,r.a.createElement(S.a,{appId:"317151258877538",autoLoad:!1,callback:this.facebookResponse,render:function(e){return r.a.createElement(b.a,{variant:"primary",size:"sm",onClick:e.onClick},"Login with Facebook")}}))}}]),t}(n.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,{bg:"dark",variant:"dark"},r.a.createElement(j.a.Brand,null,r.a.createElement("img",{alt:"",src:"../logo.png",width:"30",height:"30",className:"d-inline-block align-top"})," MineSweeper"),r.a.createElement(O.a,{className:"ml-auto"},r.a.createElement(C,null)))}}]),t}(n.Component),N=a(59),B=a.n(N),x=a(111),D=a(109),T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).showRank=function(){return e.setState({show:!e.state.show})},e.state={data:[],gotTop:0,show:!1},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=fetch("https://cryptic-harbor-11039.herokuapp.com/top5?level=Easy").then(function(e){return e.json()}),a=fetch("https://cryptic-harbor-11039.herokuapp.com/top5?level=Hard").then(function(e){return e.json()}),n=fetch("https://cryptic-harbor-11039.herokuapp.com/top5?level=Expert").then(function(e){return e.json()});Promise.all([t,a,n]).then(function(t){t=[].concat(Object(m.a)(t[0]),Object(m.a)(t[1]),Object(m.a)(t[2])),e.setState({data:t,gotTop:1})})}},{key:"render",value:function(){var e=null;return this.state.gotTop&&(e=this.state.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.score),r.a.createElement("td",null,e.level),r.a.createElement("td",null,B()(e.time).format("MMM Do YY, h:mm:ss a")))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{variant:"success",onClick:this.showRank,style:{marginTop:"20px"}},"\ud83c\udfc6 Leaderboard \ud83c\udfc6"),r.a.createElement(x.a,{show:this.state.show,onHide:this.showRank},r.a.createElement(x.a.Header,{closeButton:!0},r.a.createElement(x.a.Title,null,"Top Players")),r.a.createElement(x.a.Body,null,r.a.createElement(D.a,{striped:!0,bordered:!0,style:{color:"black"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Level"),r.a.createElement("th",null,"Time"))),r.a.createElement("tbody",null,e))),r.a.createElement(x.a.Footer,null,r.a.createElement(b.a,{variant:"secondary",onClick:this.showRank},"Close"))))}}]),t}(n.Component),I=a(110),L=(a(104),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(I.a,{style:{height:"100vh"}},r.a.createElement(v.a,{className:"h-100 align-items-center text-center"},r.a.createElement(g.a,{md:12},r.a.createElement(k,{height:8,width:8,mines:10,level:"Easy"}),r.a.createElement(T,null)))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,a){e.exports=a(105)},67:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.b9d4825b.chunk.js.map